<nz-modal [(nzVisible)]="isVisible"
          [nzCentered]="true"
          [nzWidth]="800"
          [nzBodyStyle]="{ padding: '0' }"
          (nzOnCancel)="onCancel()"
          [nzFooter]="null"
          nzTitle="">
    <ng-container *nzModalContent>
        <div class="flex flex-col md:flex-row">
            <div class="w-full md:w-2/5 border-r border-gray-150 rounded-l-md overflow-hidden flex flex-col">
                <div class="flex-shrink-0 px-4 py-3 bg-white border-b border-gray-150 font-bold text-base h-[50px] flex items-center">
                    Tìm kiếm đề tài
                </div>
                <div class="px-4 py-3 flex-1">
                    <app-form>
                        <app-form-text control="name" label="Từ khoá"/>
                    </app-form>
                </div>
                <div class="flex-shrink-0 flex items-center justify-between px-4 py-3 border-t border-gray-150">
                    <button class="w-[100px]" nzSize="large" nz-button nzType="default">
                        Làm mới
                    </button>
                    <button class="w-[100px]" nzSize="large" nz-button nzType="primary">
                        Tìm kiếm
                    </button>
                </div>
            </div>
            <div class="w-full bg-[#F5F5F5] md:w-3/5 rounded-r-md overflow-hidden">
                <div class="px-4 py-3 border-b border-gray-150 h-[50px] flex items-center justify-between">
                    <span class="text-gray-500">Có <strong>{{ filterProjects.length }}</strong> đề tài được tìm thấy!</span>
                </div>
                <div class="h-[500px] bg-[#F5F5F5] overflow-x-hidden overflow-y-auto scrollable p-3">
                    <div *ngFor="let project of filterProjects; let index = index;"
                         [class.mt-3]="index > 0"
                         class="bg-white rounded-md shadow">
                        <div class="px-3 py-2 font-semibold border-b border-gray-150 truncate">
                            {{ index < 10 ? '0' + (index + 1) : (index + 1) }}. {{ project.name }}
                        </div>
                        <div class="px-3 py-2 flex flex-col gap-1">
                            <div class="line-clamp-2">
                                <strong>Mô tả:</strong>
                                {{ project.description }}
                            </div>
                            <div class="line-clamp-2">
                                <strong>Yêu cầu:</strong>
                                {{ project.requirement }}
                            </div>
                            <div>
                                <strong>Người hướng dẫn:</strong>
                                {{ project.instructor?.fullName }}
                            </div>
                            <div class="flex gap-1">
                                <strong> Sinh viên thực hiện:</strong>
                                <div>
                                    <div *ngFor="let student of project.students">
                                        {{ student.code }} - {{ student.fullName }}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="px-3 py-2 flex justify-between items-center border-t border-gray-150">
                            <div></div>
                            <button nzSize="small" nz-button
                                    nzType="primary"
                                    [nzDanger]="isMultiple && isSelected(project.id!)"
                                    (click)="onSelect(project)">
                                {{ isMultiple && isSelected(project.id!) ? 'Bỏ chọn' : 'Chọn' }}
                            </button>
                        </div>
                    </div>
                </div>
                <div class="flex bg-white items-center justify-between px-4 py-3 border-t border-gray-150">
                    <div>
                        Đã chọn: <strong>{{ selected.length }}</strong>
                    </div>
                    <button class="w-[100px]" nzSize="large" nz-button nzType="primary" (click)="onOk()">
                        Xác nhận
                    </button>
                </div>
            </div>
        </div>
    </ng-container>
</nz-modal>
